services:

  consumer-edc:
    container_name: "consumer-edc"
    image: ghcr.io/possible-x/connector:latest-develop
    env_file: "secrets/edc_ionos_secrets.txt"
    volumes:
      - ./initial_data/edc/consumer.properties:/app/dataspaceconnector-configuration.properties:ro
    entrypoint: >
      /bin/sh -c '
      touch /app/vault.properties;
      java -Dedc.fs.config=/app/dataspaceconnector-configuration.properties -jar /app/connector.jar
      '
    network_mode: "host"

  provider-edc:
    container_name: "provider-edc"
    image: ghcr.io/possible-x/connector:latest-develop
    env_file: "secrets/edc_ionos_secrets.txt"
    volumes:
      - ./initial_data/edc/provider.properties:/app/dataspaceconnector-configuration.properties:ro
    entrypoint: >
      /bin/sh -c '
      touch /app/vault.properties;
      java -Dedc.fs.config=/app/dataspaceconnector-configuration.properties -jar /app/connector.jar 
      '
    network_mode: "host"

  sd-creation-wizard-api:
    user: "${UID}:${GID}"
    container_name: "sd-creation-wizard-api"
    image: ghcr.io/possible-x/catalog-shapes/sd-creation-wizard-api:latest
    ports:
      - "8085:8080"